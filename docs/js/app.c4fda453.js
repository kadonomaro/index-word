(function(t){function e(e){for(var a,r,o=e[0],u=e[1],s=e[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&d.push(c[r][0]),c[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);f&&f(e);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var o=n[r];0!==c[o]&&(a=!1)}a&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},r={app:0},c={app:0},i=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-07f2bd1c":"7b33f1ec","chunk-08fe2996":"65d8b83f","chunk-1a89668d":"b7b36495","chunk-2d0a4b1d":"15f46bd2","chunk-2d22d746":"3c7fbe7c","chunk-4c4b6c71":"99c84c45","chunk-65d7d158":"1851d478","chunk-cc783c14":"3247730d","chunk-1d155baf":"74afb675","chunk-527f5ab2":"d177fbb8","chunk-5be1eb73":"d54dccf5","chunk-ff281e84":"52205978"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-07f2bd1c":1,"chunk-08fe2996":1,"chunk-1a89668d":1,"chunk-4c4b6c71":1,"chunk-65d7d158":1,"chunk-1d155baf":1,"chunk-527f5ab2":1,"chunk-5be1eb73":1,"chunk-ff281e84":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-07f2bd1c":"36885a48","chunk-08fe2996":"6cad2a4f","chunk-1a89668d":"d0c3f29e","chunk-2d0a4b1d":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-4c4b6c71":"1e2bc4b8","chunk-65d7d158":"3850cf8a","chunk-cc783c14":"31d6cfe0","chunk-1d155baf":"d1f70978","chunk-527f5ab2":"d1f70978","chunk-5be1eb73":"701c969d","chunk-ff281e84":"df8576f0"}[t]+".css",c=u.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===c))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){s=d[o],l=s.getAttribute("data-href");if(l===a||l===c)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||c,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[t]=0})));var a=c[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=c[t]=[e,n]}));e.push(a[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t);var d=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=c[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}c[t]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/index-word/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0418":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"header__inner"},[n("app-logo",{staticClass:"header__logo"}),n("app-nav",{staticClass:"header__nav"})],1)])},r=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("div",{staticClass:"logo__image"},[n("img",{attrs:{src:t.image,alt:"Index Word"}})]),n("span",{staticClass:"logo__title"},[t._v("Index Word")])])},i=[],o=n("9b19"),u=n.n(o),s={name:"Logo",data:function(){return{image:u.a}}},l=s,d=(n("c4ed"),n("2877")),f=Object(d["a"])(l,c,i,!1,null,null,null),p=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav"},[n("ul",{staticClass:"nav__list"},[n("li",{staticClass:"nav__item"},[n("router-link",{staticClass:"nav__link",attrs:{to:"/"}},[t._v("Home")])],1),n("li",{staticClass:"nav__item"},[n("router-link",{staticClass:"nav__link",attrs:{to:"/about"}},[t._v("About")])],1)])])},m=[],b={name:"Nav"},g=b,_=(n("d79f"),Object(d["a"])(g,h,m,!1,null,null,null)),v=_.exports,k={name:"Header",components:{AppLogo:p,AppNav:v}},E=k,A=(n("5452"),Object(d["a"])(E,a,r,!1,null,null,null));e["a"]=A.exports},"045f":function(t,e,n){},"2a73":function(t,e,n){"use strict";var a=n("af63"),r=n.n(a);r.a},5452:function(t,e,n){"use strict";var a=n("af35"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("59ca"),r=n.n(a),c=(n("e71f"),n("588e"),n("ea7b"),n("a026")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],u={beforeMount:function(){this.getData()},methods:{getData:function(){this.$store.dispatch("getArticles"),this.$store.dispatch("getSettings")}}},s=u,l=(n("5c0b"),n("2877")),d=Object(l["a"])(s,i,o,!1,null,null,null),f=d.exports,p=(n("d3b7"),n("8c4f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("app-header"),n("main-layout")],1)},m=[],b=n("0418"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"main-layout"},[n("app-hero"),n("app-tabs"),n("div",{staticClass:"container"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)],1)},_=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"tabs"},[n("ul",{staticClass:"tabs__list"},[n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/"}},[t._v("Все статьи")])],1),n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/popular"}},[t._v("Популярные")])],1),n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/newest"}},[t._v("Новинки")])],1)])])},k=[],E={name:"Tabs"},A=E,w=(n("6f10"),Object(l["a"])(A,v,k,!1,null,null,null)),y=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero"},[n("div",{staticClass:"hero__inner"},[n("div",{staticClass:"hero__main"},[n("h1",{staticClass:"hero__title"},[t._v(t._s(t.title))]),n("span",{staticClass:"hero__subtitle"},[t._v(t._s(t.subtitle))])]),n("div",{staticClass:"hero__side"},[n("div",{staticClass:"hero__image"},[n("img",{attrs:{src:t.heroImage,alt:"Человек читает книгу",width:"600"}})])])])])},O=[],x=n("d378"),j=n.n(x),S={name:"Hero",data:function(){return{title:"Что почитать на этой неделе?",subtitle:"Мы собрали для вас самые интересные статьи за этот период",heroImage:j.a}}},P=S,B=(n("2a73"),Object(l["a"])(P,C,O,!1,null,null,null)),N=B.exports,R={name:"MainLayout",components:{AppHero:N,AppTabs:y}},D=R,L=Object(l["a"])(D,g,_,!1,null,null,null),I=L.exports,T={name:"home",components:{MainLayout:I,AppHeader:b["a"]}},U=T,V=Object(l["a"])(U,h,m,!1,null,null,null),$=V.exports,F=(n("4de4"),n("7db0"),n("4160"),n("0d03"),n("159b"),n("96cf"),n("89ba")),M=n("e587"),H=n("2fa7"),K=n("2f62");c["a"].use(K["a"]);var q=new K["a"].Store({state:{articles:[],settings:{daysBefore:null,articlePopularityLimit:null},auth:{hasAccess:!1,error:""}},mutations:{changeErrorCode:function(t,e){t.auth.error=e},changeAuthStatus:function(t,e){t.auth.hasAccess=e},updateArticles:function(t,e){t.articles=e},updateSettings:function(t,e){t.settings=e},uploadSettings:function(t,e){for(var n in e)e.hasOwnProperty(n)&&at.collection("settings").doc("general").update(Object(H["a"])({},n,e[n]))},increasePopularity:function(t,e){var n=t.articles.find((function(t){return t.id===e}));at.collection("articles").doc(e).update({popularity:++n.popularity})},updateComments:function(t,e){var n=Object(M["a"])(e,2),a=n[0],c=n[1],i=t.articles.find((function(t){return t.id===a}));c.date=r.a.firestore.Timestamp.fromDate(c.date),i.comments.push(c),setTimeout((function(){at.collection("articles").doc(a).update({comments:i.comments})}),100)},updateArticle:function(t,e){var n=Object(M["a"])(e,2),a=n[0],c=n[1];at.collection("articles").doc(a).update({url:c.url,title:c.title,text:c.text,date:r.a.firestore.Timestamp.fromDate(c.date),popularity:c.popularity,comments:c.comments})}},actions:{getArticles:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],this.state.articles.length=0,t.next=4,at.collection("articles").orderBy("date").get().then((function(t){t.forEach((function(t){var e={id:t.id,url:t.data().url,title:t.data().title,text:t.data().text,date:t.data().date.toDate(),popularity:t.data().popularity,image:"",comments:t.data().comments||[]};J(e,e.id),n.unshift(e)}))}));case 4:e.commit("updateArticles",n);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getSettings:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,at.collection("settings").doc("general").get().then((function(t){var e={daysBefore:t.data().daysBefore,articlePopularityLimit:t.data().articlePopularityLimit};n.commit("updateSettings",e)}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),login:function(){var t=Object(F["a"])(regeneratorRuntime.mark((function t(e,n){var a,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(M["a"])(n,2),r=a[0],c=a[1],t.prev=1,t.next=4,ct.signInWithEmailAndPassword(r,c);case 4:ct.onAuthStateChanged((function(t){t?e.commit("changeAuthStatus",!0):e.commit("changeAuthStatus",!1)})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.commit("changeErrorCode",t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));function e(e,n){return t.apply(this,arguments)}return e}(),uploadImage:function(t,e){var n=Object(M["a"])(e,2),a=n[0],r=n[1];W(a,r)}},getters:{errorCode:function(t){return t.auth.error},adminAccess:function(t){return t.auth.hasAccess},allArticles:function(t){return t.articles},popularArticles:function(t){return t.articles.filter((function(e){return e.popularity>=t.settings.articlePopularityLimit}))},newestArticles:function(t){var e=new Date;return e.setDate(e.getDate()-t.settings.daysBefore),t.articles.filter((function(t){return t.date.getTime()>=e.getTime()}))},getArticleById:function(t){return function(e){return t.articles.find((function(t){return t.id===e}))}},settings:function(t){return t.settings}}});function J(t,e){rt.ref().child("preview-images/".concat(e,".jpg")).getDownloadURL().then((function(e){t.image=e})).catch((function(e){console.warn(e.code),t.image="https://via.placeholder.com/400x200"}))}function W(t,e){console.log(t),rt.ref().child("preview-images/".concat(e,".jpg")).put(t).then((function(t){console.log(t,"success")}))}c["a"].use(p["a"]);var G=[{path:"/",component:$,children:[{path:"/",name:"all",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-ff281e84")]).then(n.bind(null,"122e"))}},{path:"/popular",name:"popular",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-527f5ab2")]).then(n.bind(null,"85ad"))}},{path:"/newest",name:"newest",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-1d155baf")]).then(n.bind(null,"908d"))}},{path:"/articles/:id",name:"article-detail",props:!0,component:function(){return n.e("chunk-65d7d158").then(n.bind(null,"fc1e"))}}]},{path:"/about",name:"about",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/login",name:"login",component:function(){return n.e("chunk-07f2bd1c").then(n.bind(null,"676a"))}},{path:"/admin",name:"admin",component:function(){return n.e("chunk-1a89668d").then(n.bind(null,"459d"))},beforeEnter:function(t,e,n){var a=q.getters.adminAccess;a?n():n({name:"login"})},children:[{path:"/admin",name:"general",component:function(){return n.e("chunk-2d0a4b1d").then(n.bind(null,"0810"))}},{path:"/admin/settings",name:"settings",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-5be1eb73")]).then(n.bind(null,"e0ba"))}},{path:"/admin/editor",name:"editor",component:function(){return n.e("chunk-4c4b6c71").then(n.bind(null,"fb7a"))}},{path:"/admin/editor/:id",name:"article-item-detail",props:!0,component:function(){return n.e("chunk-08fe2996").then(n.bind(null,"d8bc"))}}]}],z=new p["a"]({mode:"history",base:"/index-word/",routes:G}),Y=z,Q=n("8832"),X=n.n(Q),Z=n("3730"),tt=n.n(Z),et=n("9483");Object(et["a"])("".concat("/index-word/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("045f");n.d(e,"db",(function(){return at})),n.d(e,"storage",(function(){return rt})),n.d(e,"auth",(function(){return ct})),c["a"].config.productionTip=!1,c["a"].component("paginate",X.a),c["a"].use(tt.a);var nt={apiKey:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_MESSAGE_SENDER_ID,appId:"1:664834727086:web:a7dd48b4f891b8e38c213f"};r.a.initializeApp(nt);var at=r.a.firestore(),rt=r.a.storage(),ct=r.a.auth();new c["a"]({router:Y,store:q,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"6f10":function(t,e,n){"use strict";var a=n("75aa"),r=n.n(a);r.a},"75aa":function(t,e,n){},"9b19":function(t,e,n){t.exports=n.p+"img/logo.8a00b330.svg"},"9c0c":function(t,e,n){},"9cc8":function(t,e,n){},a3ee:function(t,e,n){},af35:function(t,e,n){},af63:function(t,e,n){},c4ed:function(t,e,n){"use strict";var a=n("9cc8"),r=n.n(a);r.a},d378:function(t,e,n){t.exports=n.p+"img/man.a0dbb342.png"},d79f:function(t,e,n){"use strict";var a=n("a3ee"),r=n.n(a);r.a}});
//# sourceMappingURL=app.c4fda453.js.map