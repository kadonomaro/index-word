(function(e){function t(t){for(var a,r,o=t[0],u=t[1],s=t[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&d.push(c[r][0]),c[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==c[o]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},c={app:0},i=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-07f2bd1c":"7b33f1ec","chunk-08fe2996":"65d8b83f","chunk-1a89668d":"b7b36495","chunk-2d0a4b1d":"15f46bd2","chunk-2d22d746":"3c7fbe7c","chunk-4c4b6c71":"99c84c45","chunk-65d7d158":"1851d478","chunk-cc783c14":"3247730d","chunk-1d155baf":"74afb675","chunk-527f5ab2":"d177fbb8","chunk-5be1eb73":"d54dccf5","chunk-ff281e84":"52205978"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-07f2bd1c":1,"chunk-08fe2996":1,"chunk-1a89668d":1,"chunk-4c4b6c71":1,"chunk-65d7d158":1,"chunk-1d155baf":1,"chunk-527f5ab2":1,"chunk-5be1eb73":1,"chunk-ff281e84":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-07f2bd1c":"36885a48","chunk-08fe2996":"6cad2a4f","chunk-1a89668d":"d0c3f29e","chunk-2d0a4b1d":"31d6cfe0","chunk-2d22d746":"31d6cfe0","chunk-4c4b6c71":"1e2bc4b8","chunk-65d7d158":"3850cf8a","chunk-cc783c14":"31d6cfe0","chunk-1d155baf":"d1f70978","chunk-527f5ab2":"d1f70978","chunk-5be1eb73":"701c969d","chunk-ff281e84":"df8576f0"}[e]+".css",c=u.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===c))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){s=d[o],l=s.getAttribute("data-href");if(l===a||l===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||c,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],f.parentNode.removeChild(f),n(i)},f.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=c[e]=[t,n]}));t.push(a[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}c[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/index-word/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0418":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"header"},[n("div",{staticClass:"header__inner"},[n("app-logo",{staticClass:"header__logo"}),n("app-nav",{staticClass:"header__nav"})],1)])},r=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("div",{staticClass:"logo__image"},[n("img",{attrs:{src:e.image,alt:"Index Word"}})]),n("span",{staticClass:"logo__title"},[e._v("Index Word")])])},i=[],o=n("9b19"),u=n.n(o),s={name:"Logo",data:function(){return{image:u.a}}},l=s,d=(n("c4ed"),n("2877")),f=Object(d["a"])(l,c,i,!1,null,null,null),p=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav"},[n("ul",{staticClass:"nav__list"},[n("li",{staticClass:"nav__item"},[n("router-link",{staticClass:"nav__link",attrs:{to:"/"}},[e._v("Home")])],1),n("li",{staticClass:"nav__item"},[n("router-link",{staticClass:"nav__link",attrs:{to:"/about"}},[e._v("About")])],1)])])},m=[],b={name:"Nav"},g=b,_=(n("d79f"),Object(d["a"])(g,h,m,!1,null,null,null)),v=_.exports,k={name:"Header",components:{AppLogo:p,AppNav:v}},E=k,w=(n("5452"),Object(d["a"])(E,a,r,!1,null,null,null));t["a"]=w.exports},"045f":function(e,t,n){},"2a73":function(e,t,n){"use strict";var a=n("af63"),r=n.n(a);r.a},5452:function(e,t,n){"use strict";var a=n("af35"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("59ca"),r=n.n(a),c=(n("e71f"),n("588e"),n("ea7b"),n("a026")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],u={beforeMount:function(){this.getData()},methods:{getData:function(){this.$store.dispatch("getArticles"),this.$store.dispatch("getSettings")}}},s=u,l=(n("5c0b"),n("2877")),d=Object(l["a"])(s,i,o,!1,null,null,null),f=d.exports,p=(n("d3b7"),n("8c4f")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("app-header"),n("main-layout")],1)},m=[],b=n("0418"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"main-layout"},[n("app-hero"),n("app-tabs"),n("div",{staticClass:"container"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)],1)},_=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"tabs"},[n("ul",{staticClass:"tabs__list"},[n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/"}},[e._v("Все статьи")])],1),n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/popular"}},[e._v("Популярные")])],1),n("li",{staticClass:"tabs__item"},[n("router-link",{staticClass:"tabs__link",attrs:{to:"/newest"}},[e._v("Новинки")])],1)])])},k=[],E={name:"Tabs"},w=E,A=(n("6f10"),Object(l["a"])(w,v,k,!1,null,null,null)),y=A.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hero"},[n("div",{staticClass:"hero__inner"},[n("div",{staticClass:"hero__main"},[n("h1",{staticClass:"hero__title"},[e._v(e._s(e.title))]),n("span",{staticClass:"hero__subtitle"},[e._v(e._s(e.subtitle))])]),n("div",{staticClass:"hero__side"},[n("div",{staticClass:"hero__image"},[n("img",{attrs:{src:e.heroImage,alt:"Человек читает книгу",width:"600"}})])])])])},O=[],x=n("d378"),j=n.n(x),S={name:"Hero",data:function(){return{title:"Что почитать на этой неделе?",subtitle:"Мы собрали для вас самые интересные статьи за этот период",heroImage:j.a}}},P=S,B=(n("2a73"),Object(l["a"])(P,C,O,!1,null,null,null)),R=B.exports,N={name:"MainLayout",components:{AppHero:R,AppTabs:y}},D=N,I=Object(l["a"])(D,g,_,!1,null,null,null),L=I.exports,T={name:"home",components:{MainLayout:L,AppHeader:b["a"]}},U=T,V=Object(l["a"])(U,h,m,!1,null,null,null),$=V.exports,F=(n("4de4"),n("7db0"),n("4160"),n("0d03"),n("159b"),n("96cf"),n("89ba")),M=n("e587"),H=n("2fa7"),W=n("2f62");c["a"].use(W["a"]);var J=new W["a"].Store({state:{articles:[],settings:{daysBefore:null,articlePopularityLimit:null},auth:{hasAccess:!1,error:""}},mutations:{changeErrorCode:function(e,t){e.auth.error=t},changeAuthStatus:function(e,t){e.auth.hasAccess=t},updateArticles:function(e,t){e.articles=t},updateSettings:function(e,t){e.settings=t},uploadSettings:function(e,t){for(var n in t)t.hasOwnProperty(n)&&re.collection("settings").doc("general").update(Object(H["a"])({},n,t[n]))},increasePopularity:function(e,t){var n=e.articles.find((function(e){return e.id===t}));re.collection("articles").doc(t).update({popularity:++n.popularity})},updateComments:function(e,t){var n=Object(M["a"])(t,2),a=n[0],c=n[1],i=e.articles.find((function(e){return e.id===a}));c.date=r.a.firestore.Timestamp.fromDate(c.date),i.comments.push(c),setTimeout((function(){re.collection("articles").doc(a).update({comments:i.comments})}),100)},updateArticle:function(e,t){var n=Object(M["a"])(t,2),a=n[0],c=n[1];re.collection("articles").doc(a).update({url:c.url,title:c.title,text:c.text,date:r.a.firestore.Timestamp.fromDate(c.date),popularity:c.popularity,comments:c.comments})}},actions:{getArticles:function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],this.state.articles.length=0,e.next=4,re.collection("articles").orderBy("date").get().then((function(e){e.forEach((function(e){var t={id:e.id,url:e.data().url,title:e.data().title,text:e.data().text,date:e.data().date.toDate(),popularity:e.data().popularity,image:"",comments:e.data().comments||[]};K(t,t.id),n.unshift(t)}))}));case 4:t.commit("updateArticles",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSettings:function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("settings").doc("general").get().then((function(e){var t={daysBefore:e.data().daysBefore,articlePopularityLimit:e.data().articlePopularityLimit};n.commit("updateSettings",t)}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(F["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(M["a"])(n,2),r=a[0],c=a[1],e.prev=1,e.next=4,ie.signInWithEmailAndPassword(r,c);case 4:ie.onAuthStateChanged((function(e){e?t.commit("changeAuthStatus",!0):t.commit("changeAuthStatus",!1)})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t.commit("changeErrorCode",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));function t(t,n){return e.apply(this,arguments)}return t}(),uploadImage:function(e,t){var n=Object(M["a"])(t,2),a=n[0],r=n[1];q(a,r)}},getters:{errorCode:function(e){return e.auth.error},adminAccess:function(e){return e.auth.hasAccess},allArticles:function(e){return e.articles},popularArticles:function(e){return e.articles.filter((function(t){return t.popularity>=e.settings.articlePopularityLimit}))},newestArticles:function(e){var t=new Date;return t.setDate(t.getDate()-e.settings.daysBefore),e.articles.filter((function(e){return e.date.getTime()>=t.getTime()}))},getArticleById:function(e){return function(t){return e.articles.find((function(e){return e.id===t}))}},settings:function(e){return e.settings}}});function K(e,t){ce.ref().child("preview-images/".concat(t,".jpg")).getDownloadURL().then((function(t){e.image=t})).catch((function(t){console.warn(t.code),e.image="https://via.placeholder.com/400x200"}))}function q(e,t){console.log(e),ce.ref().child("preview-images/".concat(t,".jpg")).put(e).then((function(e){console.log(e,"success")}))}c["a"].use(p["a"]);var z=[{path:"/",component:$,children:[{path:"/",name:"all",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-ff281e84")]).then(n.bind(null,"122e"))}},{path:"/popular",name:"popular",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-527f5ab2")]).then(n.bind(null,"85ad"))}},{path:"/newest",name:"newest",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-1d155baf")]).then(n.bind(null,"908d"))}},{path:"/articles/:id",name:"article-detail",props:!0,component:function(){return n.e("chunk-65d7d158").then(n.bind(null,"fc1e"))}}]},{path:"/about",name:"about",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/login",name:"login",component:function(){return n.e("chunk-07f2bd1c").then(n.bind(null,"676a"))}},{path:"/admin",name:"admin",component:function(){return n.e("chunk-1a89668d").then(n.bind(null,"459d"))},beforeEnter:function(e,t,n){var a=J.getters.adminAccess;a?n():n({name:"login"})},children:[{path:"/admin",name:"general",component:function(){return n.e("chunk-2d0a4b1d").then(n.bind(null,"0810"))}},{path:"/admin/settings",name:"settings",component:function(){return Promise.all([n.e("chunk-cc783c14"),n.e("chunk-5be1eb73")]).then(n.bind(null,"e0ba"))}},{path:"/admin/editor",name:"editor",component:function(){return n.e("chunk-4c4b6c71").then(n.bind(null,"fb7a"))}},{path:"/admin/editor/:id",name:"article-item-detail",props:!0,component:function(){return n.e("chunk-08fe2996").then(n.bind(null,"d8bc"))}}]}],G=new p["a"]({mode:"history",base:"/index-word/",routes:z}),Q=G,Y=n("8832"),X=n.n(Y),Z=n("3730"),ee=n.n(Z),te=n("9483");Object(te["a"])("".concat("/index-word/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("045f");n.d(t,"db",(function(){return re})),n.d(t,"storage",(function(){return ce})),n.d(t,"auth",(function(){return ie})),c["a"].config.productionTip=!1,c["a"].component("paginate",X.a),c["a"].use(ee.a);Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_API_KEY,Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_AUTH_DOMAIN,Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_DATABASE_URL,Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_PROJECT_ID,Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_STORAGE_BUCKET,Object({NODE_ENV:"production",BASE_URL:"/index-word/"}).VUE_APP_FIREBASE_MESSAGE_SENDER_ID;var ne={apiKey:"AIzaSyAbYgWAnwQQr-9Rmg70V7wjTJ16t8ljzWk",authDomain:"index-word.firebaseapp.com",databaseURL:"https://index-word.firebaseio.com",projectId:"index-word",storageBucket:"index-word.appspot.com",messagingSenderId:"664834727086",appId:"1:664834727086:web:a7dd48b4f891b8e38c213f"},ae=ne;r.a.initializeApp(ae);var re=r.a.firestore(),ce=r.a.storage(),ie=r.a.auth();new c["a"]({router:Q,store:J,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"6f10":function(e,t,n){"use strict";var a=n("75aa"),r=n.n(a);r.a},"75aa":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.8a00b330.svg"},"9c0c":function(e,t,n){},"9cc8":function(e,t,n){},a3ee:function(e,t,n){},af35:function(e,t,n){},af63:function(e,t,n){},c4ed:function(e,t,n){"use strict";var a=n("9cc8"),r=n.n(a);r.a},d378:function(e,t,n){e.exports=n.p+"img/man.a0dbb342.png"},d79f:function(e,t,n){"use strict";var a=n("a3ee"),r=n.n(a);r.a}});
//# sourceMappingURL=app.59a48c58.js.map